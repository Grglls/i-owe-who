{% extends 'base.html' %}
{% block content %}

<h3>Expense Details</h3>

<a 
  href="{% url 'ledgers_detail' expense.ledger.id %}"
  class="red-text nav-link"
>
  <i class="material-icons tiny">keyboard_backspace</i>
  Return to ledger
</a>

<div class="card grey darken-3">
  <div class="card-content">
    <span class="card-title">{{ expense.name }}</span>
    <p>Date: {{ expense.date|date:"Y-m-d D" }}</p>
    <p>Amount: {{ expense.ledger.get_currency_display|slice:"-1:" }}{{ expense.amount }}</p>
    <p>Paid by: {{ expense.user }}</p>
    <p class="grey-text">Created at: {{ expense.created_at|date:"Y-m-d g:i a" }}</p>
    <p class="grey-text">Updated at: {{ expense.updated_at|date:"Y-m-d g:i a" }}</p>
  </div>
  <div class="card-action">
    <a href="{% url 'expenses_update' expense.id %}">Edit</a>
    <a href="{% url 'expenses_delete' expense.id %}">Delete</a>
  </div>
</div>

{% for photo in expense.photo_set.all %}
  <img
    src="{{ photo.url }}"
    alt="photo of {{ expense.name }}"
    class="responsive-img card-panel"
  >
{% empty %}
  <div class="card-panel red-text center-align">
    No photos uploaded.
  </div>
{% endfor %}

<form 
  action="{% url 'add_photo' expense.id %}"
  enctype="multipart/form-data"
  method="POST"
  class="card-panel row"
>
  {% csrf_token %}
  <input type="file" name="photo-file" required>
  <br>
  <button type="submit" class="btn red darken-4 waves-effect waves-light col s12">Upload Photo</button>
</form>

{% endblock %}
